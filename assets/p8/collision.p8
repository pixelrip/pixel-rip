pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- simple collision detection

function _init()
	player={
		spr=1,
		x=60,
		y=100, 
		hb={
			x1=1,
			y1=0,
			x2=6,
			y2=7}
	}

	enemy={
		spr=2,
		x=60,
		y=100,
		hb={
			x1=0,
			y1=0,
			x2=7,
			y2=7}
	}
	
	collisions=0
	is_showing_hitbox=false
end

function _update()
	
	-- move enemy
	enemy.y+=2
	
	if enemy.y>128 then 
		enemy.y=-8
		enemy.x=rnd(116)
	end
	
	-- check for collisions
	if collided(enemy,player) then
	 collisions+=1
	end


	-- player controls	
	if(btn(⬅️)) player.x-=2
	if(btn(➡️)) player.x+=2
	if(btn(⬆️)) player.y-=2
	if(btn(⬇️)) player.y+=2
	
	if btn(❎) then
		is_showing_hitbox = true
	else
		is_showing_hitbox = false
	end
end

function _draw()
	cls(1)
	spr(player.spr,player.x,player.y)
	spr(enemy.spr,enemy.x,enemy.y)
	print("hold ❎ to show hitboxes", 2, 2, 7)
	print("collisions: "..collisions,64,120,7)

	if is_showing_hitbox then
		draw_hitboxes(enemy)
		draw_hitboxes(player)
	end
end


function collided(a,b)
	-- find top,bot,lef,rig
	local a_top=a.y+a.hb.y1
	local a_bot=a.y+a.hb.y2
	local a_lef=a.x+a.hb.x1
	local a_rig=a.x+a.hb.x2
	
	local b_top=b.y+b.hb.y1
	local b_bot=b.y+b.hb.y2
	local b_lef=b.x+b.hb.x1
	local b_rig=b.x+b.hb.x2

	-- rule out collsions
 if(a_top>b_bot) return false
 if(b_top>a_bot) return false
	if(a_lef>b_rig) return false	
	if(b_lef>a_rig) return false
	
	return true
end

function draw_hitboxes(obj)
	local y1=obj.y+obj.hb.y1
	local y2=obj.y+obj.hb.y2
	local x1=obj.x+obj.hb.x1
	local x2=obj.x+obj.hb.x2
	
	rect(x1,y1,x2,y2,10)
end
__gfx__
000000000c0000c00080080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000c00c000888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000cccccc08088880800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000c0cc0c08888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000cccccc08888888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000c00c000888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000c00c000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000c0000c00800008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11717117717111771111111777771111117771177111111771717117717171111171717771777177711771717177711771111111111111111111111111111111
11717171717111717111117717177111111711717111117111717171717171111171711711171171717171717171117111111111111111111111111111111111
11777171717111717111117771777111111711717111117771777171717171111177711711171177117171171177117771111111111111111111111111111111
11717171717111717111117717177111111711717111111171717171717771111171711711171171717171717171111171111111111111111111111111111111
11717177117771777111111777771111111711771111117711717177117771111171717771171177717711717177717711111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111118118111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111188888811111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111818888181111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111888888881111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111888888881111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111188888811111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111118888111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111181111811111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111c1111c11111111111111111111111111111111111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111c11c111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111cccccc11111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111c1cc1c11111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111cccccc11111111111111111111111111111111111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111c11c111111111111111111111111111111111111111111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111c11c111111111111111111111111111111111111111111111111111111111111111111111111
111111111111111111111111111111111111111111111111111c1111c11111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111771177171117111777117717771177177111771111111117711777111111111
11111111111111111111111111111111111111111111111111111111111111117111717171117111171171111711717171717111171111111711717111111111
11111111111111111111111111111111111111111111111111111111111111117111717171117111171177711711717171717771111111111711717111111111
11111111111111111111111111111111111111111111111111111111111111117111717171117111171111711711717171711171171111111711717111111111
11111111111111111111111111111111111111111111111111111111111111111771771177717771777177117771771171717711111111117771777111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111

